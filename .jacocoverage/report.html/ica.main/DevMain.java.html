<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DevMain.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;ICAmessages&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">ica.main</a> &gt; <span class="el_source">DevMain.java</span></div><h1>DevMain.java</h1><pre class="source lang-java linenums">package ica.main;


import ica.messages.Message;
import ica.messages.MessageType;
import ica.metaagent.MetaAgent;
import ica.metaagent.Portal;
import ica.metaagent.Router;
import ica.metaagent.SocketAgent;
import ica.metaagent.User;
import java.io.IOException;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 *
 * @author v8073331
 */
<span class="nc" id="L27">public class DevMain {</span>

    private static Router router;
    private static Thread routerThread;
    private static ArrayList&lt;Portal&gt; portals;
    private static ArrayList&lt;User&gt; users;
    private static ArrayList&lt;SocketAgent&gt; socketAgents;
    private static Scanner keyb;

    public static void main(String[] args) {
<span class="nc" id="L37">        keyb = new Scanner(System.in);</span>

<span class="nc" id="L39">        portals = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L40">        users = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L41">        socketAgents = new ArrayList&lt;&gt;();</span>

        while (true) {
<span class="nc" id="L44">            createMenu();</span>
<span class="nc" id="L45">            String line = keyb.nextLine();</span>
<span class="nc bnc" id="L46" title="All 2 branches missed.">            if (line.equalsIgnoreCase(&quot;1&quot;)) {</span>
<span class="nc bnc" id="L47" title="All 2 branches missed.">                if (router == null) {</span>
                    //create new router
<span class="nc" id="L49">                    System.out.print(&quot;Enter router name: &quot;);</span>
<span class="nc" id="L50">                    String routername = keyb.nextLine();</span>
                    try {
<span class="nc" id="L52">                        router = new Router(routername);</span>
<span class="nc" id="L53">                        routerThread = new Thread(router);</span>
<span class="nc" id="L54">                        routerThread.start();</span>
<span class="nc" id="L55">                    } catch (IOException ex) {</span>
<span class="nc" id="L56">                        Logger.getLogger(DevMain.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L57">                        System.out.println(&quot;Unable to start router&quot;);</span>
<span class="nc" id="L58">                    }</span>
<span class="nc" id="L59">                } else {</span>
                    //disconnect our router
                }
<span class="nc bnc" id="L62" title="All 2 branches missed.">            } else if (line.equalsIgnoreCase(&quot;2&quot;)) {</span>
                //create new portal
<span class="nc" id="L64">                System.out.print(&quot;Enter portal name: &quot;);</span>
<span class="nc" id="L65">                String portalname = keyb.nextLine();</span>
<span class="nc" id="L66">                Portal portal = new Portal(portalname);</span>
<span class="nc" id="L67">                portals.add(portal);</span>
<span class="nc bnc" id="L68" title="All 4 branches missed.">            } else if (line.equalsIgnoreCase(&quot;3&quot;) &amp;&amp; !portals.isEmpty()) {</span>
                //create new User Agent
<span class="nc" id="L70">                System.out.println(&quot;Enter User Agent name: &quot;);</span>
<span class="nc" id="L71">                String username = keyb.nextLine();</span>
<span class="nc" id="L72">                Portal portal = choosePortal();</span>
<span class="nc" id="L73">                User user = new User(username, portal);</span>
<span class="nc" id="L74">                users.add(user);</span>

<span class="nc bnc" id="L76" title="All 2 branches missed.">                if (askYN(&quot;Do you want to auto register user to portal?&quot;, true)) {</span>
                    //register the user to portal
<span class="nc" id="L78">                    portal.messageHandler(user, new Message(</span>
<span class="nc" id="L79">                            user.getName(),</span>
                            &quot;GLOBAL&quot;,
                            MessageType.ADD_METAAGENT,
                            &quot;&quot;));
                } else {
<span class="nc" id="L84">                    System.out.println(&quot;User not registered to portal.&quot;);</span>
<span class="nc" id="L85">                    System.out.println(&quot;To register user manually you must send&quot;</span>
                            + &quot; new message from the user you wish to register &quot;
                            + &quot;with message type ADD_METAAGENT source the name &quot;
                            + &quot;valid name of agent, and recipient 'GLOBAL'. The&quot;
                            + &quot; content of the message is ignored&quot;);
                }

<span class="nc bnc" id="L92" title="All 4 branches missed.">            } else if (line.equalsIgnoreCase(&quot;4&quot;) &amp;&amp; !portals.isEmpty()) {</span>
                //connect portal to router
<span class="nc" id="L94">                Portal portal = choosePortal();</span>
<span class="nc" id="L95">                String ip = getIP();</span>

                try {
<span class="nc" id="L98">                    Socket s = new Socket(ip, 42069);</span>
<span class="nc" id="L99">                    SocketAgent a = new SocketAgent(portal, s);</span>
<span class="nc" id="L100">                    a.start();</span>

<span class="nc" id="L102">                    socketAgents.add(a);</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">                    if (askYN(&quot;Do you want to auto register portal to router&quot;, true)) {</span>
<span class="nc" id="L104">                        a.messageHandler(portal, new Message(portal.getName(),</span>
                                &quot;GLOBAL&quot;, MessageType.ADD_PORTAL, &quot;&quot;));
                    } else {
<span class="nc" id="L107">                        System.out.println(&quot;Portal not registered to router.&quot;);</span>
<span class="nc" id="L108">                        System.out.println(&quot;To register portal manuall you must&quot;</span>
                                + &quot; send new message from the portal you wish&quot;
                                + &quot; to register with message type ADD_PORTAL,&quot;
                                + &quot; source must be valid name of the portal and&quot;
                                + &quot; recipient must be 'GLOBAL'. The content of&quot;
                                + &quot; the message is ignored&quot;);
                    }
<span class="nc" id="L115">                } catch (IOException ex) {</span>
<span class="nc" id="L116">                    Logger.getLogger(DevMain.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L117">                    System.out.println(&quot;Could not create socket connection&quot;);</span>
<span class="nc" id="L118">                }</span>
<span class="nc bnc" id="L119" title="All 4 branches missed.">            } else if (line.equalsIgnoreCase(&quot;5&quot;) &amp;&amp; router != null) {</span>
                //connect router to router
                
<span class="nc" id="L122">                String ip = getIP();</span>
                try {
<span class="nc" id="L124">                    Socket s = new Socket(ip, 42069);</span>
<span class="nc" id="L125">                    SocketAgent sa = new SocketAgent(router, s);</span>
<span class="nc" id="L126">                    sa.start();</span>
                    
<span class="nc bnc" id="L128" title="All 2 branches missed.">                    if(askYN(&quot;Do you want to auto request router addresses&quot;, true)){</span>
<span class="nc" id="L129">                        sa.messageHandler(sa, new Message(router.getName(), &quot;GLOBAL&quot;, MessageType.REQUEST_ROUTER_ADDRESSES, &quot;&quot;));</span>
                    }
<span class="nc" id="L131">                } catch (IOException ex) {</span>
<span class="nc" id="L132">                    Logger.getLogger(DevMain.class.getName()).log(Level.SEVERE, null, ex);</span>
<span class="nc" id="L133">                }</span>
                
                
                
<span class="nc bnc" id="L137" title="All 6 branches missed.">            } else if (line.equalsIgnoreCase(&quot;6&quot;) &amp;&amp; (router != null || !portals.isEmpty())) {</span>
                //send message
<span class="nc" id="L139">                System.out.print(&quot;Sender: &quot;);</span>
<span class="nc" id="L140">                String sender = keyb.nextLine();</span>
<span class="nc" id="L141">                System.out.print(&quot;Reciever: &quot;);</span>
<span class="nc" id="L142">                String reciever = keyb.nextLine();</span>
<span class="nc" id="L143">                MessageType type = chooseMessageType();</span>
<span class="nc" id="L144">                String content = &quot;&quot;;</span>
<span class="nc" id="L145">                System.out.println(&quot;Enter your message. Enter empty line to send&quot;);</span>
                while (true) {
<span class="nc" id="L147">                    String nextl = keyb.nextLine();</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">                    if (nextl.isEmpty()) {</span>
<span class="nc" id="L149">                        break;</span>
                    }
<span class="nc" id="L151">                    content += nextl;</span>
<span class="nc" id="L152">                }</span>
<span class="nc" id="L153">                System.out.println(&quot;Choose node to send the message to: &quot;);</span>
<span class="nc" id="L154">                MetaAgent forward = chooseNode();</span>
<span class="nc" id="L155">                System.out.println(&quot;Choose node to send message from: &quot;);</span>
<span class="nc" id="L156">                MetaAgent from = chooseNode();</span>

<span class="nc" id="L158">                forward.messageHandler(from, new Message(sender, reciever, type, content));</span>

<span class="nc bnc" id="L160" title="All 4 branches missed.">            } else if (line.equalsIgnoreCase(&quot;7&quot;) &amp;&amp; !portals.isEmpty()) {</span>
                //disconnect portal from router
                
<span class="nc" id="L163">                Portal portal = choosePortal();</span>
<span class="nc" id="L164">                SocketAgent agent = getSocketFromPortal(portal);</span>
                
<span class="nc" id="L166">                agent.messageHandler(portal, new Message(portal.getName(), &quot;GLOBAL&quot;, MessageType.REMOVE_PORTAL, &quot;&quot;));</span>
<span class="nc" id="L167">                agent.close();</span>
<span class="nc" id="L168">                socketAgents.remove(agent);</span>
                
<span class="nc bnc" id="L170" title="All 4 branches missed.">            } else if (line.equalsIgnoreCase(&quot;8&quot;) &amp;&amp; !users.isEmpty()) {</span>
                //disconnect user agent
<span class="nc" id="L172">                User user = chooseUserAgent();</span>
<span class="nc" id="L173">                MetaAgent forward = chooseNode();</span>
<span class="nc" id="L174">                forward.messageHandler(user, new Message(user.getName(), &quot;GLOBAL&quot;, MessageType.REMOVE_METAAGENT, &quot;&quot;));</span>
<span class="nc bnc" id="L175" title="All 2 branches missed.">            } else if (line.equalsIgnoreCase(&quot;9&quot;)) {</span>
                //disconnect socket agent
<span class="nc" id="L177">                System.out.println(&quot;Not implemented.&quot;);</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">            } else if (line.equalsIgnoreCase(&quot;0&quot;)) {</span>
                //KILL AND EXIT
<span class="nc" id="L180">                System.exit(0);</span>
            } else {
<span class="nc" id="L182">                System.out.println(&quot;Unrecognised input. Try again.&quot;);</span>
            }
<span class="nc" id="L184">        }</span>
    }

    public static void createMenu() {
<span class="nc" id="L188">        System.out.println(&quot;What do you want to do?&quot;);</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">        if (router == null) {</span>
<span class="nc" id="L190">            System.out.println(&quot;[1]\tCreate new Router&quot;);</span>
        } else {
<span class="nc" id="L192">            System.out.println(&quot;[1]\tDisconnect Router&quot;);</span>
        }
<span class="nc" id="L194">        System.out.println(&quot;[2]\tCreate new Portal&quot;);</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">        if(portals.isEmpty()){</span>
<span class="nc" id="L196">            System.out.println(&quot;[-]\t!Must have portal first!&quot;);</span>
<span class="nc" id="L197">            System.out.println(&quot;[-]\t!Must have portal first!&quot;);</span>
        }else{
<span class="nc" id="L199">            System.out.println(&quot;[3]\tCreate new User Agent&quot;);</span>
<span class="nc" id="L200">            System.out.println(&quot;[4]\tConnect Portal to Router&quot;);</span>
        }
<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (router != null) {</span>
<span class="nc" id="L203">            System.out.println(&quot;[5]\tConnect Router to Router&quot;);</span>
        } else {
<span class="nc" id="L205">            System.out.println(&quot;[-]\t!Must have local router first!&quot;);</span>
        }
<span class="nc bnc" id="L207" title="All 4 branches missed.">        if(router == null &amp;&amp; portals.isEmpty()){</span>
<span class="nc" id="L208">            System.out.println(&quot;[-]\t!Must have local router or portal first&quot;);</span>
        }else{
<span class="nc" id="L210">            System.out.println(&quot;[6]\tSend message&quot;);</span>
        }
<span class="nc bnc" id="L212" title="All 2 branches missed.">        if(portals.isEmpty()){</span>
<span class="nc" id="L213">            System.out.println(&quot;[-]\t!Must have portal connected to router first!&quot;);</span>
        }else{
<span class="nc" id="L215">            System.out.println(&quot;[7]\tDisconnect Portal from Router&quot;);</span>
        }
<span class="nc bnc" id="L217" title="All 2 branches missed.">        if(users.isEmpty()){</span>
<span class="nc" id="L218">            System.out.println(&quot;[-]\t!Must have User Agent first!&quot;);</span>
        }else{
<span class="nc" id="L220">            System.out.println(&quot;[8]\tDisconnect User Agent&quot;);</span>
        }
<span class="nc" id="L222">        System.out.println(&quot;[9]\tKill Socket Agent&quot;);</span>
<span class="nc" id="L223">        System.out.println(&quot;[0]\tKILL AND EXIT&quot;);</span>
<span class="nc" id="L224">    }</span>

    public static Portal choosePortal() {
<span class="nc bnc" id="L227" title="All 2 branches missed.">        if (portals.isEmpty()) {</span>
<span class="nc" id="L228">            System.out.println(&quot;There is no portals to be choosen!&quot;);</span>
<span class="nc" id="L229">            return null;</span>
<span class="nc bnc" id="L230" title="All 2 branches missed.">        } else if (portals.size() == 1) {</span>
<span class="nc" id="L231">            System.out.println(&quot;Automatically choosing only portal available (&quot; + portals.get(0).getName() + &quot;)&quot;);</span>
<span class="nc" id="L232">            return portals.get(0);</span>
        } else {
<span class="nc" id="L234">            System.out.println(&quot;Choose portal to use: &quot;);</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">            for (int x = 0; x &lt; portals.size(); x++) {</span>
<span class="nc" id="L236">                System.out.println(&quot;[&quot; + x + &quot;] &quot; + portals.get(x).getName());</span>
            }
            while (true) {
<span class="nc" id="L239">                System.out.print(&quot;Portal number: &quot;);</span>
<span class="nc bnc" id="L240" title="All 2 branches missed.">                while (!keyb.hasNextInt()) {</span>
<span class="nc" id="L241">                    System.out.println(&quot;Invalid input.&quot;);</span>
<span class="nc" id="L242">                    keyb.nextLine();</span>
<span class="nc" id="L243">                    System.out.print(&quot;Portal number: &quot;);</span>
                }
<span class="nc" id="L245">                int choice = keyb.nextInt();</span>
<span class="nc" id="L246">                keyb.nextLine();</span>
<span class="nc bnc" id="L247" title="All 4 branches missed.">                if (choice &gt; portals.size() || choice &lt; 0) {</span>
<span class="nc" id="L248">                    System.out.println(&quot;Invalid number.&quot;);</span>
<span class="nc" id="L249">                    continue;</span>
                }
<span class="nc" id="L251">                return portals.get(choice);</span>
            }
        }
    }
    
    public static User chooseUserAgent(){
<span class="nc bnc" id="L257" title="All 2 branches missed.">        if(users.isEmpty()){</span>
<span class="nc" id="L258">            System.out.println(&quot;There is no user agents to be choosen!&quot;);</span>
<span class="nc" id="L259">            return null;</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">        }else if(users.size() == 1){</span>
<span class="nc" id="L261">            System.out.println(&quot;Automatically choosing only user available (&quot; + users.get(0) + &quot;)&quot;);</span>
<span class="nc" id="L262">            return users.get(0);</span>
        }else{
<span class="nc" id="L264">            System.out.println(&quot;Choose user to use: &quot;);</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">            for(int x = 0; x &lt; users.size(); x++){</span>
<span class="nc" id="L266">                System.out.println(&quot;[&quot; + x + &quot;] &quot; + users.get(x).getName());</span>
            }
            while(true){
<span class="nc" id="L269">                System.out.println(&quot;User number: &quot;);</span>
<span class="nc bnc" id="L270" title="All 2 branches missed.">                while(!keyb.hasNextInt()){</span>
<span class="nc" id="L271">                    System.out.println(&quot;Invalid input.&quot;);</span>
<span class="nc" id="L272">                    keyb.nextLine();</span>
<span class="nc" id="L273">                    System.out.println(&quot;User number: &quot;);</span>
                }
<span class="nc" id="L275">                int choice = keyb.nextInt();</span>
<span class="nc" id="L276">                keyb.nextLine();</span>
<span class="nc bnc" id="L277" title="All 4 branches missed.">                if(choice &gt; users.size() || choice &lt; 0){</span>
<span class="nc" id="L278">                    System.out.println(&quot;Invalid number.&quot;);</span>
<span class="nc" id="L279">                    continue;</span>
                }
<span class="nc" id="L281">                return users.get(choice);</span>
            }
        }
    }

    public static boolean askYN(String question, boolean def) {
        while (true) {
<span class="nc bnc" id="L288" title="All 2 branches missed.">            System.out.print(question + (def ? &quot; [Y/n]&quot; : &quot; [y/N]&quot;) + &quot;: &quot;);</span>
<span class="nc" id="L289">            String resp = keyb.nextLine();</span>
<span class="nc bnc" id="L290" title="All 2 branches missed.">            if (resp.equalsIgnoreCase(&quot;y&quot;)) {</span>
<span class="nc" id="L291">                return true;</span>
<span class="nc bnc" id="L292" title="All 2 branches missed.">            } else if (resp.equalsIgnoreCase(&quot;n&quot;)) {</span>
<span class="nc" id="L293">                return false;</span>
<span class="nc bnc" id="L294" title="All 2 branches missed.">            } else if (resp.isEmpty()) {</span>
<span class="nc" id="L295">                return def;</span>
            } else {
<span class="nc" id="L297">                System.out.println(&quot;Invalid input.&quot;);</span>
            }
<span class="nc" id="L299">        }</span>
    }

    public static String getIP() {
<span class="nc" id="L303">        System.out.println(&quot;Enter IP or leave blank for 127.0.0.1&quot;);</span>
<span class="nc" id="L304">        String ip = keyb.nextLine();</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">        return (ip.isEmpty()) ? &quot;127.0.0.1&quot; : ip;</span>
    }

    public static MessageType chooseMessageType() {
        while (true) {
<span class="nc" id="L310">            System.out.println(&quot;Choose message type:&quot;);</span>
<span class="nc" id="L311">            System.out.println(&quot;[0] USER_MSG&quot;);</span>
<span class="nc" id="L312">            System.out.println(&quot;[1] ADD_METAAGENT&quot;);</span>
<span class="nc" id="L313">            System.out.println(&quot;[2] REMOVE_METAAGENT&quot;);</span>
<span class="nc" id="L314">            System.out.println(&quot;[3] ERROR&quot;);</span>
<span class="nc" id="L315">            System.out.println(&quot;[4] ADD_PORTAL&quot;);</span>
<span class="nc" id="L316">            System.out.println(&quot;[5] REMOVE_PORTAL&quot;);</span>
<span class="nc" id="L317">            System.out.println(&quot;[6] LOAD_TABLE&quot;);</span>
<span class="nc" id="L318">            System.out.println(&quot;[7] ADD_ROUTER&quot;);</span>
<span class="nc" id="L319">            System.out.println(&quot;[8] LOAD_ADDRESSES&quot;);</span>
<span class="nc" id="L320">            System.out.println(&quot;[9] REQUEST_ROUTER_ADDRESSES&quot;);</span>

<span class="nc bnc" id="L322" title="All 2 branches missed.">            while (!keyb.hasNextInt()) {</span>
<span class="nc" id="L323">                keyb.nextLine();</span>
            }

<span class="nc" id="L326">            int choice = keyb.nextInt();</span>
<span class="nc" id="L327">            keyb.nextLine();</span>
<span class="nc bnc" id="L328" title="All 11 branches missed.">            switch (choice) {</span>
                case 0:
<span class="nc" id="L330">                    return MessageType.USER_MSG;</span>
                case 1:
<span class="nc" id="L332">                    return MessageType.ADD_METAAGENT;</span>
                case 2:
<span class="nc" id="L334">                    return MessageType.REMOVE_METAAGENT;</span>
                case 3:
<span class="nc" id="L336">                    return MessageType.ERROR;</span>
                case 4:
<span class="nc" id="L338">                    return MessageType.ADD_PORTAL;</span>
                case 5:
<span class="nc" id="L340">                    return MessageType.REMOVE_PORTAL;</span>
                case 6:
<span class="nc" id="L342">                    return MessageType.LOAD_TABLE;</span>
                case 7:
<span class="nc" id="L344">                    return MessageType.ADD_ROUTER;</span>
                case 8:
<span class="nc" id="L346">                    return MessageType.LOAD_ADDRESSES;</span>
                case 9:
<span class="nc" id="L348">                    return MessageType.REQUEST_ROUTER_ADDRESSES;</span>
            }
<span class="nc" id="L350">        }</span>
    }

    public static MetaAgent chooseNode() {
        while (true) {
<span class="nc" id="L355">            System.out.println(&quot;Choose node: &quot;);</span>
<span class="nc bnc" id="L356" title="All 2 branches missed.">            if(router != null){</span>
<span class="nc" id="L357">                System.out.println(&quot;[0] &quot; + router.getName());</span>
            }
<span class="nc bnc" id="L359" title="All 2 branches missed.">            for (int x = 1; x &lt; portals.size() + 1; x++) {</span>
<span class="nc" id="L360">                System.out.println(&quot;[&quot; + x + &quot;] &quot; + portals.get(x - 1).getName());</span>
            }
<span class="nc bnc" id="L362" title="All 2 branches missed.">            for (int x = portals.size() + 1; x &lt; users.size() + portals.size() + 1; x++) {</span>
<span class="nc" id="L363">                System.out.println(&quot;[&quot; + x + &quot;] &quot; + users.get(x - 1 - portals.size()).getName());</span>
            }
<span class="nc bnc" id="L365" title="All 2 branches missed.">            for (int x = portals.size() + users.size() + 1; x &lt; socketAgents.size() + users.size() + portals.size() + 1; x++) {</span>
<span class="nc" id="L366">                System.out.println(&quot;[&quot; + x + &quot;] &quot; + socketAgents.get(x - 1 - portals.size() - users.size()).getName());</span>
            }

<span class="nc bnc" id="L369" title="All 2 branches missed.">            while (!keyb.hasNextInt()) {</span>
<span class="nc" id="L370">                keyb.nextLine();</span>
            }
<span class="nc" id="L372">            int choice = keyb.nextInt();</span>
<span class="nc" id="L373">            keyb.nextLine();</span>
<span class="nc bnc" id="L374" title="All 4 branches missed.">            if (choice == 0 &amp;&amp; router != null) {</span>
<span class="nc" id="L375">                return router;</span>
<span class="nc bnc" id="L376" title="All 2 branches missed.">            } else if (choice &lt; portals.size() + 1) {</span>
<span class="nc" id="L377">                return portals.get(choice - 1);</span>
<span class="nc bnc" id="L378" title="All 2 branches missed.">            } else if (choice &lt; users.size() + portals.size() + 1) {</span>
<span class="nc" id="L379">                return users.get(choice - 1 - portals.size());</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">            } else if (choice &lt; socketAgents.size() + users.size() + portals.size() + 1) {</span>
<span class="nc" id="L381">                return socketAgents.get(choice - users.size() - portals.size() - 1);</span>
            }
<span class="nc" id="L383">        }</span>
    }
    public static SocketAgent getSocketFromPortal(Portal portal){
<span class="nc bnc" id="L386" title="All 2 branches missed.">        for(SocketAgent sa : socketAgents){</span>
<span class="nc bnc" id="L387" title="All 2 branches missed.">            if(sa.getName().contains(portal.getName())){</span>
<span class="nc" id="L388">                return sa;</span>
            }
<span class="nc" id="L390">        }</span>
<span class="nc" id="L391">        return null;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>